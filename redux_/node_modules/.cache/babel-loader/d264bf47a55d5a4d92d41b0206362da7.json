{"ast":null,"code":"var _jsxFileName = \"/Users/maikegeleidi/Desktop/Other/React/redux/src/app.js\";\nimport React from 'react';\nimport { BrowserRouter, Route, Switch, Redirect } from 'react-router-dom';\nimport ReactDOM from 'react-dom';\nimport Home from './home';\nimport Main from './main';\nimport Add from './add';\nimport Footer from \"./foot\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.now = 0;\n    this.state = {\n      data: [{\n        id: 0,\n        title: \"空白格11\",\n        singer: \"蔡健雅11\",\n        selected: true,\n        like: false\n      }, {\n        id: 1,\n        title: \"空白格22\",\n        singer: \"蔡健雅2222\",\n        selected: true,\n        like: false\n      }, {\n        id: 2,\n        title: \"空白格33\",\n        singer: \"蔡健雅33333\",\n        selected: true,\n        like: false\n      }, {\n        id: 3,\n        title: \"空白格33\",\n        singer: \"蔡健雅33333\",\n        selected: true,\n        like: false\n      }]\n    };\n    this.add = this.add.bind(this);\n    this.checkAll = this.checkAll.bind(this);\n    this.setCheck = this.setCheck.bind(this);\n    this.setLike = this.setLike.bind(this);\n    this.remove = this.remove.bind(this);\n    this.removeSelect = this.removeSelect.bind(this);\n    this.likeSelect = this.likeSelect.bind(this);\n    this.cancelLikeSelect = this.cancelLikeSelect.bind(this);\n  }\n\n  add(title, singer) {\n    let data = this.state.data;\n    if (!title && !singer) return;\n    data.push({\n      id: this.now,\n      title: title,\n      singer: singer,\n      selected: false,\n      like: false\n    });\n    this.now++;\n    this.setState({\n      data\n    });\n  }\n\n  isCheckAll() {\n    let data = this.state.data;\n\n    for (let i = 0; i < data.length; i++) {\n      if (!data[i].selected) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  checkAll(checked) {\n    let data = this.state.data.map(value => {\n      value.selected = checked;\n      return value;\n    });\n    this.setState({\n      data\n    });\n  }\n\n  setCheck(index, checked) {\n    let data = this.state.data;\n    data.forEach(val => {\n      if (val.id === index) {\n        val.selected = checked;\n      }\n    });\n    this.setState({\n      data\n    }); // data[index].selected  = checked;\n    // this.setState({\n    //     data\n    // })\n  }\n\n  setLike(index, checked) {\n    let data = this.state.data; // data[index].like = checked;\n\n    data.forEach(val => {\n      if (val.id === index) {\n        val.like = checked;\n      }\n    });\n    this.setState({\n      data\n    });\n  }\n\n  remove(index) {\n    let data = this.state.data.filter(val => val.id !== index);\n    this.setState({\n      data\n    });\n  }\n\n  removeSelect() {\n    let data = this.state.data.filter(val => !val.selected);\n    this.setState({\n      data\n    });\n  }\n\n  likeSelect() {\n    let data = this.state.data.map(val => {\n      if (val.selected) {\n        val.like = true;\n      }\n\n      return val;\n    });\n    this.setState({\n      data\n    });\n  }\n\n  cancelLikeSelect() {\n    let data = this.state.data.map(val => {\n      if (val.selected) {\n        val.like = false;\n      }\n\n      return val;\n    });\n    this.setState({\n      data\n    });\n  }\n\n  shouldComponentUpdate(nextProps, nextState, nextContext) {\n    if (!nextState.listState) {\n      let likeData = nextState.data.filter(val => val.like);\n\n      if (!likeData.length) {\n        this.setState({\n          listState: true\n        });\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  render() {\n    return React.createElement(BrowserRouter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"musicApp\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/add\",\n      render: e => {\n        //注册路由\n        return React.createElement(Add, {\n          length: this.state.data.length,\n          add: this.add,\n          router: e,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/\",\n      render: e => {\n        if (this.state.data.length === 0) {\n          return React.createElement(Redirect, {\n            to: \"/add\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 181\n            },\n            __self: this\n          }); // 重定向\n        }\n\n        return React.createElement(Home, {\n          pathName: e.location.pathname,\n          data: this.state.data,\n          checkAll: this.isCheckAll() // 检测是否全部选中\n          ,\n          setCheckAll: this.checkAll // 全选\n          ,\n          setCheck: this.setCheck // 单选\n          ,\n          setLike: this.setLike // 收藏\n          ,\n          remove: this.remove,\n          removeSelect: this.removeSelect // 删除选中歌曲\n          ,\n          likeSelect: this.likeSelect // 选中收藏\n          ,\n          cancelLikeSelect: this.cancelLikeSelect,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }))));\n  }\n\n}","map":{"version":3,"sources":["/Users/maikegeleidi/Desktop/Other/React/redux/src/app.js"],"names":["React","BrowserRouter","Route","Switch","Redirect","ReactDOM","Home","Main","Add","Footer","App","Component","constructor","props","now","state","data","id","title","singer","selected","like","add","bind","checkAll","setCheck","setLike","remove","removeSelect","likeSelect","cancelLikeSelect","push","setState","isCheckAll","i","length","checked","map","value","index","forEach","val","filter","shouldComponentUpdate","nextProps","nextState","nextContext","listState","likeData","render","e","location","pathname"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {BrowserRouter,Route,Switch,Redirect } from 'react-router-dom';\nimport ReactDOM from 'react-dom';\nimport  Home from './home'\nimport  Main from './main'\nimport  Add  from './add'\nimport Footer from \"./foot\";\nclass App extends  React.Component {\n    constructor(props){\n        super(props);\n        this.now = 0;\n        this.state = {\n            data:[\n                {\n                    id       : 0,\n                    title    : \"空白格11\",\n                    singer   : \"蔡健雅11\",\n                    selected : true,\n                    like     : false\n                },{\n                    id       : 1,\n                    title    : \"空白格22\",\n                    singer   : \"蔡健雅2222\",\n                    selected : true,\n                    like     : false\n                },{\n                    id       : 2,\n                    title    : \"空白格33\",\n                    singer   : \"蔡健雅33333\",\n                    selected : true,\n                    like     : false\n                },{\n                    id       : 3,\n                    title    : \"空白格33\",\n                    singer   : \"蔡健雅33333\",\n                    selected : true,\n                    like     : false\n                }\n            ]\n        }\n        this.add = this.add.bind(this);\n        this.checkAll = this.checkAll.bind(this);\n        this.setCheck = this.setCheck.bind(this);\n        this.setLike = this.setLike.bind(this);\n        this.remove = this.remove.bind(this);\n        this.removeSelect = this.removeSelect.bind(this);\n        this.likeSelect = this.likeSelect.bind(this);\n        this.cancelLikeSelect = this.cancelLikeSelect.bind(this);\n    }\n\n    add(title,singer){\n        let data = this.state.data;\n        if (!title && !singer) return;\n        data.push({\n            id:this.now,\n            title:title,\n            singer:singer,\n            selected :false,\n            like:false\n        });\n        this.now++;\n        this.setState({\n            data\n        })\n    }\n    isCheckAll(){\n\n        let data = this.state.data;\n        for(let i = 0; i < data.length; i++){\n            if(!data[i].selected){\n                return false;\n            }\n        }\n        return true;\n    }\n\n    checkAll(checked){\n        let data = this.state.data.map((value)=>{\n            value.selected = checked;\n            return value;\n        });\n        this.setState({\n            data\n        })\n    }\n\n    setCheck(index,checked){\n        let data = this.state.data;\n        data.forEach((val)=>{\n            if (val.id === index){\n                val.selected = checked;\n            }\n        });\n        this.setState({\n            data\n        })\n        // data[index].selected  = checked;\n        // this.setState({\n        //     data\n        // })\n    }\n\n    setLike(index,checked){\n        let data = this.state.data;\n        // data[index].like = checked;\n        data.forEach((val)=>{\n            if (val.id === index){\n                val.like = checked;\n            }\n        });\n        this.setState({\n            data\n        })\n    }\n\n    remove(index){\n        let data = this.state.data.filter((val)=> val.id!== index);\n        this.setState({\n            data\n        })\n    }\n\n    removeSelect(){\n        let data = this.state.data.filter((val)=> !val.selected);\n        this.setState({\n            data\n        })\n    }\n\n    likeSelect(){\n        let data = this.state.data.map((val)=>{\n            if (val.selected){\n                val.like = true;\n            }\n            return val;\n        })\n        this.setState({\n            data\n        })\n    }\n\n    cancelLikeSelect(){\n        let data = this.state.data.map((val)=>{\n            if (val.selected){\n                val.like = false;\n            }\n            return val;\n        })\n        this.setState({\n            data\n        })\n    }\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        if(!nextState.listState){\n            let likeData = nextState.data.filter((val)=>val.like);\n            if (!likeData.length){\n                this.setState({\n                    listState:true\n                });\n                return false\n            }\n        }\n        return true;\n    }\n\n    render(){\n        return(\n            <BrowserRouter>\n                <div id=\"musicApp\">\n                    <Switch>\n                        <Route path=\"/add\" render={(e)=>{ //注册路由\n                            return(<Add\n                                length = {this.state.data.length}\n                                add = {this.add}\n                                router={e}\n                            />);\n                        }} />\n                        <Route path=\"/\" render={(e)=>{\n                            if(this.state.data.length === 0){\n                                return <Redirect to=\"/add\"/> // 重定向\n                            }\n                            return (\n                                <Home\n                                    pathName={e.location.pathname}\n                                    data = {this.state.data}\n                                    checkAll={this.isCheckAll()}  // 检测是否全部选中\n                                    setCheckAll={this.checkAll}   // 全选\n                                    setCheck={this.setCheck}      // 单选\n                                    setLike = {this.setLike}      // 收藏\n                                    remove = {this.remove}\n                                    removeSelect = {this.removeSelect}          // 删除选中歌曲\n                                    likeSelect = {this.likeSelect}              // 选中收藏\n                                    cancelLikeSelect = {this.cancelLikeSelect}\n                                />\n                            );\n                        }}\n                        />\n\n                    </Switch>\n\n                </div>\n            </BrowserRouter>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}